<%- include('template', { pageTitle: 'Global Lobby', pageContent:'Lobby Time@' }) %>

<form>
    <input type="text" placeholder="Your Message">
    <button id="sendMessage">Send</button>
</form>

<ul></ul>

<script src="https://cdn.socket.io/4.1.2/socket.io.min.js"></script>

<script> // we should probably move this to front end global_lobby.js and then include the script fk it
    const socket = io.connect("http://localhost:3000");

    function sendMessage(e) {
        e.preventDefault();
        const input = document.querySelector('input');
        if (input.value) {
            socket.emit("message", input.value);
            input.value = "";
        }
        input.focus();
    }

    document.getElementById('sendMessage').addEventListener('click', sendMessage);

    // listening for mesages from the serverrrr
    socket.on("message", (data) => {
        const li = document.createElement('li');
        li.textContent = data;
        document.querySelector('ul').appendChild(li);
    });
</script>
